(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function serialize(e,t){var a=[];for(var r in e)if(e.hasOwnProperty(r)){var r=t?t+"["+r+"]":r,n=e[r];a.push("object"==typeof n?serialize(n,r):encodeURIComponent(r)+"="+encodeURIComponent(n))}return a.join("&")}var River=React.createClass({displayName:"River",getInitialState:function(){var e=localStorage.getItem("login"),t=localStorage.getItem("token"),a=!1;return e&&""!=e.trim()&&t&&""!=t.trim()||(a=!0),{error:!1,loading:!1,showSettings:!1,stories:[],login:e,token:t}},saveSettings:function(e){var t=this;e.preventDefault();var a=React.findDOMNode(this.refs.login).value.trim(),r=React.findDOMNode(this.refs.token).value.trim();r&&a&&(React.findDOMNode(this.refs.login).value=a,React.findDOMNode(this.refs.token).value=r,localStorage.setItem("login",a),localStorage.setItem("token",r),this.setState({error:null,stories:[],showSettings:!1,login:a,token:r},function(){t.loadContent()}))},loadContent:function(){var e=this;this.setState({error:!1,loading:!0},function(){var t="https://stream.superfeedr.com/",a={count:5,"hub.mode":"retrieve",authorization:btoa([this.state.login,this.state.token].join(":")),"hub.callback":"https://push.superfeedr.com/dev/null"};t=[t,serialize(a)].join("?");var r=new EventSource(t);r.addEventListener("error",function(t){e.setState({loading:!1,error:"There was an error. Please, check your credentials."})}),r.addEventListener("notification",function(t){var a=JSON.parse(t.data);a.items.sort(function(e,t){return e.published-t.published}),a.items.forEach(function(t){t.source||(t.source={title:a.title,permalinkUrl:a.permalinkUrl}),e.state.stories.unshift(t),e.setState({loading:!1,stories:e.state.stories})})})})},toggleShowSettings:function(){this.setState({showSettings:!this.state.showSettings})},componentDidMount:function(){this.loadContent()},render:function(){var e="";this.state.showSettings&&(e=React.createElement("form",{className:"panel-body",onSubmit:this.saveSettings},React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"login"},"Login"),React.createElement("input",{type:"text",className:"form-control",ref:"login",placeholder:"Login",defaultValue:this.state.login})),React.createElement("div",{className:"form-group"},React.createElement("label",{htmlFor:"token"},"Token"),React.createElement("input",{type:"text",className:"form-control",ref:"token",placeholder:"Token",defaultValue:this.state.token})),React.createElement("button",{type:"submit",className:"btn btn-default pull-right"},"Save")));var t=this.state.stories.map(function(e){return React.createElement(NewsBit,{key:e.id,story:e})}),a="";this.state.loading&&(a=React.createElement("div",{className:"panel-body"},React.createElement("p",{className:"text-center"},React.createElement("span",{className:"glyphicon glyphicon-refresh","aria-hidden":"true"}))));return this.state.error&&(a=React.createElement("div",{className:"panel-body"},React.createElement("p",{className:"text-center"},this.state.error))),React.createElement("div",{className:"panel panel-default"},React.createElement("div",{className:"panel-heading clearfix"},React.createElement("button",{type:"button",className:"btn btn-default btn-link pull-right","aria-label":"Left Align",onClick:this.toggleShowSettings},React.createElement("span",{className:"glyphicon glyphicon-wrench","aria-hidden":"true"}))),e,a,React.createElement("div",{className:"list-group"},t),React.createElement("div",{className:"panel-footer"},"Made with ",React.createElement("a",{href:"https://push.superfeedr.com"},"Superfeedr"),". ",React.createElement("a",{href:"https://github.com/superfeedr/readernews"},"Source code"),"."))}}),NewsBit=React.createClass({displayName:"NewsBit",render:function(){var e={title:"",url:"",icon:""};this.props.story.source&&(e.title=this.props.story.source.title,e.icon="http://www.google.com/s2/favicons?domain="+encodeURIComponent(this.props.story.source.permalinkUrl),e.url=this.props.story.source.permalinkUrl);var t=new Date(1e3*this.props.story.published).toUTCString();return React.createElement("a",{href:this.props.story.permalinkUrl,className:"list-group-item"},React.createElement("h4",{className:"list-group-item-heading"},this.props.story.title),React.createElement("span",{className:"source"},React.createElement("img",{src:e.icon}),e.title,", published ",t))}});React.render(React.createElement(River,null),document.getElementById("content"));

},{}]},{},[1]);
